# **Домашнее Задание №1.**

> **Бронирование номеров отелей.**

## **Сценарии**

1. Поиск отеля.
  - Пользователь заходит на сайт / в приложение.
  - Пользователь указывает город, даты заезда / выезда, дополняет фильтрами.
  - Пользователь получает список.
2. Оформление бронирования.
  - Выбор нужного отеля и номера (возможно, нескольких).
  - Указываются персональные данные.
  - Выбирается оплата (онлайн / при заселении / после)
  - Система резервирует номер(а) и формирует бронирования (создавая `Booking_ID`)
3. Управление бронированием.
  - Просмотр списка бронирований.
  - Возможность изменить бронирование (изменить номер, отель, кол-во гостей, способ оплаты...)
  - *В том числе можно отменить бронь и вернуть деньги, если они были заплачены.*
  - Сохранение изменение.
4. Заселение / выезд.
  - Прибытие в отель (Сообщается ФИО / сканируется ID бронирования).
  - Происходит сверка данных.
  - Происходит заселение (Статус бронирования изменяется на `CheckedIn`).
  - Гость уезжает, формируется счет, статус становится `CheckedOut`.
  - Номер убирают, статус комнаты становится "Available".
5. Оплата.
  - Происходит или при оформлении на сайте (онлайн) или при заселении (офлайн).
  

## **Сущности, агрегаты, объекты значений:**

- **`Booking` (Бронирование / Резервация).**
  - Уникальный ID бронирования (`Booking_ID`).
  - Статус бронирования (`Booking_Status`)
  - Статус оплаты (`Payment_Status`)
  - Детали оплаты - номмер карты и тд. (`Payment_Dertails`)
  - Уникальный ID комнаты / номера (`Room_ID`)
  - Дата заезда (`CheckIn_Date`).
  - Дата выезда (`CheckOut_Date`).
  - ID Бронируемого (`User_ID`).
  - *Количество гостей* (`Guests_Number`).
- **`Hotel` (Отель - агрегатор).**
  - Уникальный ID отеля (`Hotel_ID`).
  - Описание отеля (`Hotel_Description`).
  - Адрес (`Hotel_Adress`).
  - Категория отеля (количество звезд) (`Hotel_Category`).
  - Список услуг (`Hotel_Service_List`).
- **`Room` (Номер в отеле).**
  - Уникальный ID номера (`Room_ID`)
  - Тип номера (`Room_Type`)
  - Вместимость (`Room_Capacity`)
  - Статус занятости (Занят / зарезервирован / свободен) (`Room_Status`)
  - Специфика комнаты (Вид на море, мансардное окно и т.д.) (`Room_Specifics`)
- **`User` (Гость / Пользователь системы).**
  - Уникальный ID пользователя (`User_ID`).
  - ФИО (User_Name).
  - Почта / Телефон (`User_Mail` / `User_Phone`).

## **Агрегаты**

1. `BookingAggregate`
- Root: `Booking`
- Включает в себя информацию о забронированных номерах (`Room_Id` / `Room_Type`) и пользователя (`User_ID`), а также возможные значения: Даты (`CheckIn_Date` / `CheckOut_Date`), `Payment_Status` и прочее.

**Важно:** нельзя подтвердить бронирование, если не указаны все необходимые данные; нельзя оплатить, если сумма оплаты не согласована; при отмене меняется статус, отменяется блокировка номера и подобное.

2. `HotelAggregate`
- Root: `Hotel`
- Включает коллекцию `Room` (номеров), может хранить правила проживания, условия расторжения договора и подобное.

**Важно:** нельзя добавить два номера с одинаковым идентификатором; при блокировке номера для бронирования он становится недоступен для других.


## **Объекты значений**

1. `Date_Range` (`CheckIn_Date`, `CheckOut_Date`)
- Не имеет собственного идентификатора, определяется только значением (диапазон дат).

**Важно:** дата заезда не должна быть позже даты выезда, невозможно создать бронирование в прошлом (или возможно, но со статусом «Проверка» или что-то подобное).

2. `Price`
- Сумма в определённой валюте (например, 100 USD).
- Поля: amount (100), currency (USD).

**Важно:** Цена положительная, проверить валюту.

3. `Room_Type` (Single, Double, Suite, Deluxe и много-много...)
- Содержит тип комнаты и их описания.

4. `Payment_Details`
- Содержит тип оплаты (карта, PayPal, наличные), последние 4 цифры карты и подобное.

5. `Address`
- Адрес отеля.
- Обычный объект, так как уникальность достигается значением (улица, дом и т.п.), нет ID.


## **Глоссарий**

| Термин                                         | Определение                                                                                                                                           |
|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Отель (Hotel)**                              | Место размещения, содержащее в себе набор номеров для аренды/бронирования.                                                                             |
| **Номер (Room)**                               | Конкретное помещение внутри отеля, имеющее уникальный ID и характеристики (тип номера, вместимость, статус).                                          |
| **Тип номера (Room_Type)**                      | Категория номера: Single, Double, Suite... Влияет на вместимость, цену и особенности номера.                                               |
| **Гость (Guest)**                              | Человек, брониирующий номер. Может являться зарегистрированным пользователем (User) или гостем (без аккаунта).           |
| **Бронирование (Booking)**                     | Объект, фиксирующий факт резервирования номера (или нескольких номеров), содержащий информацию о датах, госте, статусе, оплате и прочее                  |
| **Даты заезда / выезда (CheckIn_Date, CheckOut_Date)** | Диапазон дат, указывающий, когда гость въезжает в отель (CheckIn) и когда выезжает (CheckOut).                                                        |
| **Статус бронирования (Booking_Status)**        | Может иметь значения: «Создано» (Created), «Оплачено» (Paid), «Отменено» (Cancelled), «Проживание» (In-Stay), «Завершено» (Completed)          |
| **Оплата (Payment)**                           | Процесс, связанный с переводом денежных средств за бронирование (может быть до заезда, в момент заезда или при выезде, могут быть и возвраты).        |
| **Цена (Price)**                       | Денежная сумма в определённой валюте (RUB, USD, EUR...).                                                                              |
